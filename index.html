<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Over - Pop1 War Team Calendar</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <img src="logos/GO_Classic_Skull_Cyberpunk_Colors.png" alt="Game Over Logo" class="logo">
            <div class="header-text">
                <h1>GAME OVER</h1>
                <p class="subtitle">Population One War Team</p>
            </div>
        </header>

        <!-- Auth Bar -->
        <div class="auth-bar">
            <!-- Not logged in -->
            <div id="loginSection">
                <a href="/auth/discord" class="btn btn-discord">
                    <svg width="20" height="20" viewBox="0 0 71 55" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3## truncated for brevity
                    </svg>
                    Login with Discord
                </a>
                <div class="login-consent">
                    By logging in, you agree to our <a href="#" class="privacy-link">Privacy Policy</a>
                    and <a href="#" class="tos-link">Terms of Service</a>
                </div>
            </div>

            <!-- Logged in -->
            <div id="userSection" style="display: none;">
                <div class="user-info">
                    <img id="userAvatar" class="user-avatar" src="" alt="">
                    <span id="userName" class="user-name"></span>
                    <span id="managerBadge" class="manager-badge" style="display: none;">Manager</span>
                </div>
                <div id="playerInfo" class="player-info">
                    <span id="linkedPlayer"></span>
                </div>
                <div id="playerPreference" class="player-preference" style="display: none;">
                    <label>My Role:</label>
                    <select id="rolePreference">
                        <option value="starter">Starter (Full Season)</option>
                        <option value="sub">Prefer to Sub</option>
                    </select>
                </div>
                <button id="logoutBtn" class="btn btn-small">Logout</button>
            </div>
        </div>

        <!-- Tabs -->
        <nav class="tabs">
            <button class="tab active" data-tab="calendar">Upcoming Games</button>
            <button class="tab" data-tab="roster">Team Roster</button>
            <button class="tab" data-tab="help">Help</button>
            <button class="tab manager-only" data-tab="manage" style="display: none;">Manage Games</button>
        </nav>

        <!-- Calendar Tab -->
        <section id="calendar" class="tab-content active">
            <h2>Upcoming Games</h2>
            <p class="timezone-note">All times in Eastern (ET)</p>
            <div id="gamesList" class="games-list">
                <!-- Games will be populated here -->
            </div>
        </section>

        <!-- Roster Tab -->
        <section id="roster" class="tab-content">
            <h2>Team Roster</h2>

            <div class="roster-section">
                <h3>Active Members</h3>
                <div id="activeRoster" class="roster-grid">
                    <!-- Active members here -->
                </div>
            </div>

            <div class="roster-section">
                <h3>Substitute Players (Vets)</h3>
                <div id="subRoster" class="roster-grid">
                    <!-- Subs here -->
                </div>
            </div>
        </section>

        <!-- Help Tab -->
        <section id="help" class="tab-content">
            <h2>How to Use This App</h2>

            <div class="help-toggle">
                <button class="help-btn active" data-view="player">For Players</button>
                <button class="help-btn" data-view="manager">For Managers</button>
            </div>

            <div id="playerGuide" class="help-guide">
                <h3>Player Guide</h3>
                <ol class="help-steps">
                    <li>
                        <strong>Login with Discord</strong>
                        <p>Click the "Login with Discord" button to connect your Discord account. This lets the app know who you are.</p>
                    </li>
                    <li>
                        <strong>Link Your Profile</strong>
                        <p>The first time you log in, you'll be asked to select your player name from the roster. This links your Discord to your team profile.</p>
                    </li>
                    <li>
                        <strong>Mark Your Availability</strong>
                        <p>For each upcoming game, click "I Can Play" if you're available, or "Can't Make It" if you're not. Managers use this to build rosters.</p>
                    </li>
                    <li>
                        <strong>Get Reminders</strong>
                        <p>If you're added to a game roster, you'll receive a Discord DM reminder 24 hours before the game.</p>
                    </li>
                    <li>
                        <strong>Set Your Preference</strong>
                        <p>Choose whether you prefer to be a "Starter" (play every game) or "Sub" (fill in when needed). This helps managers build balanced rosters.</p>
                    </li>
                </ol>
            </div>

            <div id="managerGuide" class="help-guide" style="display: none;">
                <h3>Manager Guide</h3>
                <p class="help-note">You need the "Manager" role in Discord to access manager features.</p>
                <ol class="help-steps">
                    <li>
                        <strong>Create Games</strong>
                        <p>Go to the "Manage Games" tab. Fill in the date, time, and opponent team name, then click "Create Game".</p>
                    </li>
                    <li>
                        <strong>View Availability</strong>
                        <p>On each game card, you'll see who has marked themselves as available or unavailable.</p>
                    </li>
                    <li>
                        <strong>Set the Roster</strong>
                        <p>Click "Select Roster" on a game to choose the 10 players who will play. Prioritize players who marked themselves as available.</p>
                    </li>
                    <li>
                        <strong>Post to Discord</strong>
                        <p>Once the roster is set, click "Post to Discord" to announce the game in your server channel.</p>
                    </li>
                    <li>
                        <strong>Configure Webhook</strong>
                        <p>In the Manage Games tab, set your Discord webhook URL to enable posting announcements.</p>
                    </li>
                </ol>

                <h4>Tips</h4>
                <ul class="help-tips">
                    <li>Players marked with "Starter" preference want to play every game</li>
                    <li>Players marked with "Sub" prefer to fill in when starters can't make it</li>
                    <li>Rostered players automatically get DM reminders 24h before games</li>
                    <li>The [EU] tag shows players in European timezone</li>
                </ul>
            </div>
        </section>

        <!-- Manage Tab (Manager Only) -->
        <section id="manage" class="tab-content manager-only">
            <h2>Manage Games</h2>

            <div class="manage-section">
                <h3>Create New Game Day</h3>
                <form id="createGameForm" class="create-game-form">
                    <div class="form-row">
                        <label for="gameDate">Date:</label>
                        <input type="date" id="gameDate" required>
                    </div>
                    <div class="form-row">
                        <label for="gameTime">Time (ET):</label>
                        <input type="time" id="gameTime" required>
                    </div>
                    <div class="form-row">
                        <label for="opponent">Opponent Team:</label>
                        <input type="text" id="opponent" placeholder="e.g., Team Alpha" required>
                    </div>
                    <div class="form-row">
                        <label for="gameNotes">Notes (optional):</label>
                        <input type="text" id="gameNotes" placeholder="e.g., Playoffs Round 1">
                    </div>
                    <button type="submit" class="btn btn-primary">Create Game</button>
                </form>
            </div>

            <div class="manage-section">
                <h3>Existing Games</h3>
                <div id="manageGamesList" class="manage-games-list">
                    <!-- Games for management here -->
                </div>
            </div>

            <div class="manage-section">
                <h3>Discord Settings</h3>
                <p style="color: var(--text-secondary); margin-bottom: 10px;">
                    Set up a webhook to post game announcements to your Discord server.
                </p>
                <div class="form-row" style="max-width: 500px;">
                    <label for="discordWebhook">Webhook URL:</label>
                    <input type="text" id="discordWebhook" placeholder="https://discord.com/api/webhooks/...">
                </div>
                <button class="btn btn-primary" style="margin-top: 10px;" onclick="saveWebhookSetting()">
                    Save Webhook
                </button>
            </div>
        </section>

        <!-- Game Detail Modal -->
        <div id="gameModal" class="modal">
            <div class="modal-content">
                <span class="close-modal">&times;</span>
                <div id="modalContent">
                    <!-- Dynamic content -->
                </div>
            </div>
        </div>

        <!-- Roster Selection Modal (Manager) -->
        <div id="rosterModal" class="modal">
            <div class="modal-content modal-large">
                <span class="close-modal">&times;</span>
                <h2>Select Roster</h2>
                <div id="rosterModalContent">
                    <!-- Dynamic content -->
                </div>
            </div>
        </div>

        <!-- Link Account Modal -->
        <div id="linkModal" class="modal">
            <div class="modal-content">
                <h2>Link Your Account</h2>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    Welcome! Please select your player name to link your Discord account.
                </p>
                <div class="form-row">
                    <label for="linkPlayerSelect">I am:</label>
                    <select id="linkPlayerSelect">
                        <option value="">-- Select Your Name --</option>
                    </select>
                </div>
                <button id="linkPlayerBtn" class="btn btn-primary" style="margin-top: 15px;">
                    Link Account
                </button>
            </div>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
    <div id="privacyModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close-modal">&times;</span>
            <h2>Privacy Policy</h2>
            <div class="legal-content">
                <p class="legal-updated">Last updated: February 2026</p>

                <h3>What We Collect</h3>
                <p>When you log in with Discord, we collect only:</p>
                <ul>
                    <li><strong>Discord User ID</strong> - A unique number identifying your account</li>
                    <li><strong>Username</strong> - Your Discord display name</li>
                    <li><strong>Avatar</strong> - Your profile picture URL (optional)</li>
                    <li><strong>Server Roles</strong> - Only checked to verify manager status, not stored</li>
                </ul>

                <h3>What We DON'T Collect</h3>
                <ul>
                    <li>Your email address</li>
                    <li>Your Discord password</li>
                    <li>Your friends list</li>
                    <li>Your private messages</li>
                    <li>Any payment information</li>
                </ul>

                <h3>How We Use Your Data</h3>
                <ul>
                    <li>Display your name on the roster and availability lists</li>
                    <li>Send you game reminders via Discord DM (only for games you're rostered for)</li>
                    <li>Verify if you have manager permissions</li>
                </ul>

                <h3>Data Storage & Security</h3>
                <ul>
                    <li>Your data is stored securely on Render.com servers in the United States</li>
                    <li>We use encrypted HTTPS connections for all data transmission</li>
                    <li>Session tokens are cryptographically signed and expire after 7 days</li>
                    <li>We never share your data with third parties</li>
                </ul>

                <h3>Your Rights</h3>
                <ul>
                    <li><strong>Access:</strong> You can see all data we have about you in your profile</li>
                    <li><strong>Delete:</strong> Contact a manager to have your account unlinked</li>
                    <li><strong>Revoke:</strong> You can revoke access anytime in Discord Settings → Authorized Apps</li>
                </ul>

                <h3>Contact</h3>
                <p>Questions? Reach out to a team manager on Discord.</p>
            </div>
        </div>
    </div>

    <!-- Terms of Service Modal -->
    <div id="tosModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close-modal">&times;</span>
            <h2>Terms of Service</h2>
            <div class="legal-content">
                <p class="legal-updated">Last updated: February 2026</p>

                <h3>1. What This Is</h3>
                <p>This is a private scheduling tool for the Game Over Pop1 War Team. It helps team members coordinate game availability and receive reminders.</p>

                <h3>2. Who Can Use It</h3>
                <p>This app is intended for members of the Game Over clan and invited guests only.</p>

                <h3>3. Your Responsibilities</h3>
                <ul>
                    <li>Keep your availability updated accurately</li>
                    <li>Don't share your session or impersonate others</li>
                    <li>Be respectful to other team members</li>
                    <li>Don't attempt to access manager features without authorization</li>
                </ul>

                <h3>4. Manager Responsibilities</h3>
                <ul>
                    <li>Create games and manage rosters fairly</li>
                    <li>Respect player privacy and preferences</li>
                    <li>Don't abuse Discord webhook or DM features</li>
                </ul>

                <h3>5. No Warranties</h3>
                <p>This app is provided "as is" for team coordination. We're not responsible for missed games due to technical issues. Always double-check important game times on Discord.</p>

                <h3>6. Changes</h3>
                <p>We may update these terms. Continued use means you accept any changes.</p>

                <h3>7. Have Fun</h3>
                <p>This is about gaming together. Let's keep it positive!</p>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>Game Over Clan - Founded 2021 by Softest_Unicorn</p>
        <div class="footer-links">
            <a href="#" id="privacyLink">Privacy Policy</a>
            <span class="footer-divider">|</span>
            <a href="#" id="tosLink">Terms of Service</a>
        </div>
        <p class="security-note">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
            </svg>
            Secure connection · Data encrypted · Discord OAuth protected
        </p>
    </footer>

    <script src="app.js"></script>
</body>
</html>
